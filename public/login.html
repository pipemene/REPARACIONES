<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Login - BlueHome OS</title>
  <style>
    body{font-family:Arial;background:#f1f5f9;display:flex;justify-content:center;align-items:center;height:100vh;}
    .login{background:#fff;padding:30px;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.1);width:300px}
    input{width:100%;padding:10px;margin:8px 0;border:1px solid #ccc;border-radius:4px}
    button{width:100%;padding:10px;background:#2563eb;color:#fff;border:none;border-radius:4px;cursor:pointer}
    .error{color:red;margin-top:10px;text-align:center}
  </style>
</head>
<body>
  <div class="login">
    <h2>Iniciar sesión</h2>
    <input type="text" id="username" placeholder="Usuario">
    <input type="password" id="password" placeholder="Contraseña">
    <button onclick="login()">Ingresar</button>
    <div id="error" class="error"></div>
  </div>
<script>
async function login(){
  const username = document.getElementById('username').value;
  const password = document.getElementById('password').value;
  const res = await fetch('/api/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username,password})});
  if(res.ok){
    const data = await res.json();
    localStorage.setItem('token',data.token);
    window.location.href='/panel.html';
  }else{
    document.getElementById('error').innerText='❌ Usuario o contraseña incorrectos';
  }
}
</script>
</body>
</html>